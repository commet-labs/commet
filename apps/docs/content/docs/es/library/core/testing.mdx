---
title: Pruebas
description: Prueba de forma segura con el entorno sandbox
---

# Pruebas

Usa el entorno sandbox para probar de forma segura antes de producción.

## Entorno Sandbox

Sandbox es el entorno por defecto con datos completamente aislados:

```typescript
const commet = new Commet({
  apiKey: process.env.COMMET_SANDBOX_KEY!,
  environment: 'sandbox'  // Default
})

// Todas las operaciones usan sandbox.commet.co
await commet.customers.create({
  legalName: 'Test Customer',
  currency: 'USD'
})
```

**Características de sandbox:**
- Base de datos separada de producción
- Comportamiento real de la API
- Operaciones gratuitas
- Experimentación segura

## Flujo de Prueba

```typescript
// 1. Crear customer de prueba
const customer = await commet.customers.create({
  legalName: 'Test Company',
  currency: 'USD'
})

// 2. Crear suscripción
const subscription = await commet.subscriptions.create({
  productId: 'prd_test_123',
  customerId: customer.data.id
})

// 3. Enviar eventos de uso
await commet.usage.create({
  eventType: 'api_call',
  customerId: customer.data.id,
  idempotencyKey: `test_${Date.now()}`
})

// 4. Verificar
const events = await commet.usage.list({
  customerId: customer.data.id
})
console.log('Events:', events.data.length)
```

## Identificadores Únicos

Usa IDs únicos para evitar conflictos:

```typescript
const testId = `test_${Date.now()}`

await commet.customers.create({
  legalName: `Test Customer ${testId}`,
  externalId: testId,
  currency: 'USD'
})
```

## Probar Idempotencia

```typescript
const eventId = `test_${Date.now()}`

// Enviar dos veces con mismo idempotencyKey
await commet.usage.create({
  eventType: 'api_call',
  customerId: 'cus_123',
  idempotencyKey: eventId
})

// Segunda llamada no crea duplicado
await commet.usage.create({
  eventType: 'api_call',
  customerId: 'cus_123',
  idempotencyKey: eventId  // Mismo ID
})
```

## Cambiar a Producción

```typescript
// Sandbox (pruebas)
const sandbox = new Commet({
  apiKey: process.env.COMMET_SANDBOX_KEY!,
  environment: 'sandbox'
})

// Production (en vivo)
const production = new Commet({
  apiKey: process.env.COMMET_PRODUCTION_KEY!,
  environment: 'production'
})
```

Obtén tu API key de producción desde el [dashboard](https://commet.co/settings/api-keys).
