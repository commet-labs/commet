---
title: Autenticación
description: Autenticación con API key en entornos sandbox y producción
---

import { Tabs, Tab } from 'fumadocs-ui/components/tabs'

# Autenticación

Inicializa el SDK con tu API key.

## Configuración Básica

```typescript
import { Commet } from '@commet/node'

const commet = new Commet({
  apiKey: process.env.COMMET_API_KEY!
})
```

Obtén tu API key desde el [dashboard](https://sandbox.commet.co/settings/api-keys).

## Opciones de Configuración

```typescript
const commet = new Commet({
  apiKey: process.env.COMMET_API_KEY!,
  environment: 'sandbox',  // 'sandbox' (default) o 'production'
  debug: true,             // Habilitar logging
  timeout: 30000,          // Timeout de request (ms)
  retries: 3               // Máximo de reintentos
})
```

### Opciones

| Opción | Tipo | Default | Descripción |
|--------|------|---------|-------------|
| `apiKey` | string | *requerido* | Tu API key (empieza con `ck_`) |
| `environment` | `'sandbox'` \| `'production'` | `'sandbox'` | Entorno a usar |
| `debug` | boolean | `false` | Habilitar logging detallado |
| `timeout` | number | `30000` | Timeout de request en milisegundos |
| `retries` | number | `3` | Máximo de reintentos para requests fallidos |

## Entornos

Commet tiene dos entornos aislados:

**Sandbox** (`sandbox.commet.co`): Desarrollo y pruebas

**Production** (`commet.co`): Facturación en vivo

```typescript
// Sandbox (default)
const sandbox = new Commet({
  apiKey: process.env.COMMET_SANDBOX_KEY!,
  environment: 'sandbox'
})

// Production
const production = new Commet({
  apiKey: process.env.COMMET_PRODUCTION_KEY!,
  environment: 'production'
})
```

Verificar entorno actual:

```typescript
console.log(commet.getEnvironment())  // 'sandbox' o 'production'
console.log(commet.isSandbox())       // true o false
console.log(commet.isProduction())    // true o false
```

## Modo Debug

Habilita logging para ver detalles de request/response:

```typescript
const commet = new Commet({
  apiKey: process.env.COMMET_API_KEY!,
  debug: true
})

// Salida en consola:
// [Commet SDK] Initialized in sandbox mode
// API Key: ck_xxx12345...
// Base URL: https://sandbox.commet.co
// [Commet SDK] GET https://sandbox.commet.co/api/customers
// [Commet SDK] Response status: 200 OK
```

## Validación

El API key es validado en la inicialización:

```typescript
// ❌ API key faltante
const commet = new Commet({})
// Error: Commet SDK: API key is required

// ❌ Formato inválido
const commet = new Commet({
  apiKey: 'invalid-key'
})
// Error: Commet SDK: Invalid API key format. Expected format: ck_xxx...

// ✅ Válido
const commet = new Commet({
  apiKey: 'ck_xxx1234567890abcdef'
})
```
