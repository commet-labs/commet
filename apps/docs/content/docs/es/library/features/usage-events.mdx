---
title: Eventos de Uso
description: Rastrea datos de uso para facturación precisa
---

import { Tabs, Tab } from 'fumadocs-ui/components/tabs'
import { Callout } from 'fumadocs-ui/components/callout'

# Eventos de Uso

Rastrea el uso del cliente para facturación. Envía eventos en tiempo real o agrúpalos para escenarios de alto volumen.

<Callout type="info">
**Prerrequisitos:** Inicializa tu cliente Commet con una clave API válida.
</Callout>

## Crear Evento

```typescript
const result = await commet.usage.create({
  eventType: 'api_call',
  customerId: 'cus_xxx',
  idempotencyKey: `evt_${Date.now()}`,
})
```

<Callout type="info">
**Identificación de Cliente**: Usa `customerId` o `externalId` para identificar clientes.
</Callout>

## Usando IDs Externos

```typescript
const result = await commet.usage.create({
  eventType: 'api_call',
  externalId: 'stripe_cus_abc123',
  idempotencyKey: `evt_${Date.now()}`,
})
```

## Properties de Evento

Agrega contexto a eventos:

```typescript
await commet.usage.create({
  eventType: 'api_call',
  customerId: 'cus_xxx',
  idempotencyKey: `evt_${Date.now()}`,
  properties: [
    { property: 'endpoint', value: '/api/users' },
    { property: 'method', value: 'GET' }
  ]
})
```

## Procesamiento en Lotes

Envía múltiples eventos eficientemente:

```typescript
const result = await commet.usage.createBatch({
  events: [
    {
      eventType: 'api_call',
      customerId: 'cus_xxx',
      idempotencyKey: `evt_${Date.now()}_1`,
    },
    {
      eventType: 'api_call',
      externalId: 'stripe_cus_abc',
      idempotencyKey: `evt_${Date.now()}_2`,
    }
  ]
})
```

## Listar Eventos

```typescript
const events = await commet.usage.list({
  customerId: 'cus_xxx',
  eventType: 'api_call',
  limit: 100
})

// Paginación
if (events.hasMore) {
  const nextPage = await commet.usage.list({
    customerId: 'cus_xxx',
    cursor: events.nextCursor
  })
}
```

## Recuperar Evento

```typescript
const event = await commet.usage.retrieve('evt_xxx')
```

## Eliminar Evento

```typescript
await commet.usage.delete('evt_xxx')
```

## Recursos Relacionados

- [Suscripciones](/es/docs/library/features/subscriptions) - Crear facturación recurrente
- [Clientes](/es/docs/library/features/customers) - Gestionar datos de clientes
