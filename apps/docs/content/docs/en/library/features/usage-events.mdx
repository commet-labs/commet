---
title: Usage Events
description: Track usage data for accurate billing
---

import { Tabs, Tab } from 'fumadocs-ui/components/tabs'
import { Callout } from 'fumadocs-ui/components/callout'

# Usage Events

Track customer usage for billing. Send events in real-time or batch them for high-volume scenarios.

<Callout type="info">
**Prerequisites:** Initialize your Commet client with a valid API key.
</Callout>

## Create Event

```typescript
const result = await commet.usage.create({
  eventType: 'api_call',
  customerId: 'cus_xxx',
  idempotencyKey: `evt_${Date.now()}`,
})
```

<Callout type="info">
**Customer Identification**: Use `customerId` or `externalId` to identify customers.
</Callout>

## Using External IDs

```typescript
const result = await commet.usage.create({
  eventType: 'api_call',
  externalId: 'stripe_cus_abc123',
  idempotencyKey: `evt_${Date.now()}`,
})
```

## Event Properties

Add context to events:

```typescript
await commet.usage.create({
  eventType: 'api_call',
  customerId: 'cus_xxx',
  idempotencyKey: `evt_${Date.now()}`,
  properties: [
    { property: 'endpoint', value: '/api/users' },
    { property: 'method', value: 'GET' }
  ]
})
```

## Batch Processing

Send multiple events efficiently:

```typescript
const result = await commet.usage.createBatch({
  events: [
    {
      eventType: 'api_call',
      customerId: 'cus_xxx',
      idempotencyKey: `evt_${Date.now()}_1`,
    },
    {
      eventType: 'api_call',
      externalId: 'stripe_cus_abc',
      idempotencyKey: `evt_${Date.now()}_2`,
    }
  ]
})
```

## List Events

```typescript
const events = await commet.usage.list({
  customerId: 'cus_xxx',
  eventType: 'api_call',
  limit: 100
})

// Pagination
if (events.hasMore) {
  const nextPage = await commet.usage.list({
    customerId: 'cus_xxx',
    cursor: events.nextCursor
  })
}
```

## Retrieve Event

```typescript
const event = await commet.usage.retrieve('evt_xxx')
```

## Delete Event

```typescript
await commet.usage.delete('evt_xxx')
```

## Related Resources

- [Subscriptions](/docs/library/features/subscriptions) - Create recurring billing
- [Customers](/docs/library/features/customers) - Manage customer data
