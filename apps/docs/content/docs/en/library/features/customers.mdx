---
title: Customers
description: Manage customers for billing
---

import { Callout } from 'fumadocs-ui/components/callout'

## Create Customer

```typescript
const customer = await commet.customers.create({
  email: 'billing@acme.com',
  externalId: 'user_123'
})
```

## Link to Your System

Use `externalId` to connect Commet customers with your database:

```typescript
const customer = await commet.customers.create({
  email: user.email,
  externalId: user.id,
  legalName: 'Acme Corporation'
})

// Later, find by your ID
const customers = await commet.customers.list({
  externalId: user.id
})
```

## Basic Operations

```typescript
// Get
const customer = await commet.customers.get('cus_xxx')

// Update
await commet.customers.update('cus_xxx', {
  displayName: 'Acme Corp',
  email: 'accounts@acme.com'
})

// List
const customers = await commet.customers.list({
  isActive: true,
  limit: 50
})

// Archive
await commet.customers.archive('cus_xxx')
```

## Batch Create

Import customers in bulk for initial sync:

```typescript
await commet.customers.createBatch({
  customers: [
    { email: 'user1@example.com', externalId: 'user_1' },
    { email: 'user2@example.com', externalId: 'user_2' },
    { email: 'user3@example.com', externalId: 'user_3' }
  ]
})
```

## Add Address

Complete customer profile when information becomes available:

```typescript
await commet.customers.update(customerId, {
  address: {
    line1: '123 Business St',
    city: 'San Francisco',
    state: 'CA',
    postalCode: '94105',
    country: 'US'
  }
})
```

## Metadata

Store additional data with customers:

```typescript
await commet.customers.update('cus_xxx', {
  metadata: {
    crm_id: 'sf_123456',
    tier: 'enterprise'
  }
})
```

## Related Resources

- [Subscriptions](/docs/library/features/subscriptions) - Create recurring billing
- [Portal Access](/docs/library/features/portal-access) - Generate customer portal links
