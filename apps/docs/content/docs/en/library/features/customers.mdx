---
title: Customer Management
description: Manage customers with addresses and taxation
---

import { Tabs, Tab } from 'fumadocs-ui/components/tabs'
import { Callout } from 'fumadocs-ui/components/callout'

## Create Customer

```typescript
const customer = await commet.customers.create({
  legalName: 'Acme Corporation',
  billingEmail: 'billing@acme.com'
})
```

## Link to Your System

Use `externalId` to connect Commet customers with your database:

```typescript
const customer = await commet.customers.create({
  externalId: user.id,
  legalName: 'Acme Corporation',
  billingEmail: user.email
})

// Later, find by your ID
const customers = await commet.customers.list({
  externalId: user.id
})
```

## Basic Operations

```typescript
// Retrieve
const customer = await commet.customers.retrieve('cus_xxx')

// Update
await commet.customers.update('cus_xxx', {
  displayName: 'Acme Corp',
  billingEmail: 'accounts@acme.com'
})

// List
const customers = await commet.customers.list({
  isActive: true,
  limit: 50
})

// Deactivate
await commet.customers.deactivate('cus_xxx')
```

## Add Address Later

Complete customer profile when information becomes available:

```typescript
await commet.customers.update(customerId, {
  address: {
    line1: '123 Business St',
    line2: 'Suite 100', // Optional
    city: 'San Francisco',
    state: 'CA', // Required for US/CA
    postalCode: '94105',
    country: 'US', // ISO-2 format
    region: 'North America' // Optional
  }
})
```

## Custom Metadata

Store additional data with customers:

```typescript
await commet.customers.update('cus_xxx', {
  metadata: {
    crm_id: 'sf_123456',
    tier: 'enterprise',
    account_manager: 'john.doe@company.com'
  }
})
```

## Related Resources

- [Subscriptions](/docs/library/features/subscriptions) - Create recurring billing
- [Portal Access](/docs/library/features/portal-access) - Generate customer portal links
- [Pagination](/docs/library/core/pagination) - Handle large customer lists
