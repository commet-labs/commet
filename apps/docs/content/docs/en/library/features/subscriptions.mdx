---
title: Subscriptions
description: Create and manage subscriptions with multiple products
---

import { Tabs, Tab } from 'fumadocs-ui/components/tabs'
import { Callout } from 'fumadocs-ui/components/callout'

<Callout type="info">
**Prerequisites:** Initialize your Commet client with a valid API key.
</Callout>

<Callout type="success">
**Testing subscriptions?** Use the sandbox environment and [Stripe test cards](/docs/library/core/testing#stripe-test-cards) to test checkout flows safely.
</Callout>

## Create Subscription

Create a subscription with one or more products:

```typescript
const subscription = await commet.subscriptions.create({
  customerId: 'cus_A1b2C3d4E5f6G7h8I9j0K1l2',
  items: [
    { priceId: 'price_tasks_free', quantity: 1 }
  ]
})

console.log('Subscription created:', subscription.data.id)
```

### Multiple Products

Bundle multiple products in a single subscription:

```typescript
const subscription = await commet.subscriptions.create({
  externalId: 'org_123',
  items: [
    { priceId: 'price_tasks_pro', quantity: 1 },
    { priceId: 'price_usage_pro' },
    { priceId: 'price_seats_pro', initialSeats: 5 }
  ],
  status: 'active'
})
```

### Product Types

<Tabs items={['Fixed', 'Usage-Based', 'Seat-Based']}>
<Tab value="Fixed">
```typescript
const subscription = await commet.subscriptions.create({
  customerId: 'cus_xxx',
  items: [
    { priceId: 'price_fixed_plan', quantity: 1 }
  ]
})
```
</Tab>
<Tab value="Usage-Based">
```typescript
const subscription = await commet.subscriptions.create({
  customerId: 'cus_xxx',
  items: [
    { priceId: 'price_api_calls' }
  ]
})

// Track usage
await commet.usage.create({
  eventType: 'api_call',
  customerId: 'cus_xxx',
  idempotencyKey: `evt_${Date.now()}`
})
```
</Tab>
<Tab value="Seat-Based">
```typescript
const subscription = await commet.subscriptions.create({
  customerId: 'cus_xxx',
  items: [
    { priceId: 'price_user_licenses', initialSeats: 10 }
  ]
})

// Manage seats
await commet.seats.add({
  customerId: 'cus_xxx',
  seatType: 'editor',
  count: 5
})
```
</Tab>
</Tabs>

## Options

### Draft Subscription

Create subscription for review before activation:

```typescript
const draft = await commet.subscriptions.create({
  customerId: 'cus_xxx',
  items: [
    { priceId: 'price_enterprise', quantity: 100 }
  ],
  status: 'draft'
})
```

<Callout type="info">
**Draft subscriptions** don't generate invoices until manually activated in the platform.
</Callout>

### Custom Start Date

Schedule subscriptions for future billing:

```typescript
const subscription = await commet.subscriptions.create({
  customerId: 'cus_xxx',
  items: [
    { priceId: 'price_monthly', quantity: 1 }
  ],
  startDate: '2025-02-01T00:00:00Z',
  status: 'active'
})
```

### Named Subscription

```typescript
const subscription = await commet.subscriptions.create({
  externalId: 'startup-xyz',
  name: 'Startup XYZ - Growth Plan',
  items: [
    { priceId: 'price_growth', quantity: 1 }
  ]
})
```

## Basic Operations

```typescript
// Retrieve subscription
const subscription = await commet.subscriptions.retrieve('sub_A1b2C3d4E5f6G7h8I9j0K1l2')

// List subscriptions
const subscriptions = await commet.subscriptions.list({
  customerId: 'cus_A1b2C3d4E5f6G7h8I9j0K1l2',
  status: 'active'
})

// List by external ID
const subscriptions = await commet.subscriptions.list({
  externalId: 'org_123'
})

// Cancel subscription
await commet.subscriptions.cancel('sub_A1b2C3d4E5f6G7h8I9j0K1l2')
```

## Complete Example

```typescript
// Create subscription with multiple products
const sub = await commet.subscriptions.create({
  externalId: 'startup-xyz',
  name: 'Startup XYZ - Growth Plan',
  items: [
    { priceId: 'price_base_plan', quantity: 1 },
    { priceId: 'price_api_usage' },
    { priceId: 'price_user_seats', initialSeats: 5 }
  ],
  status: 'active'
})

// Track API usage
await commet.usage.create({
  eventType: 'api_call',
  externalId: 'startup-xyz',
  idempotencyKey: `evt_${Date.now()}`
})

// Add team members
await commet.seats.add({
  externalId: 'startup-xyz',
  seatType: 'editor',
  count: 3
})

// Check seat balance
const balance = await commet.seats.getBalance({
  externalId: 'startup-xyz',
  seatType: 'editor'
})
console.log('Total seats:', balance.data.current) // 8
```

## Related Resources

- [Usage Events](/docs/library/features/usage-events) - Track consumption for usage-based billing
- [Seat Management](/docs/library/features/seat-management) - Manage per-seat licensing
- [Customers](/docs/library/features/customers) - Create and manage customers
